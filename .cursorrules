# Правила для проекта Dev Rules

## Общая информация о проекте

Это проект документации на Docusaurus для стандартов разработки в 1С:Предприятие 8. Проект полностью на русском языке и использует современный стек технологий для создания качественной документации.

## Технологический стек

- **Docusaurus**: 3.x (основной фреймворк документации)
- **React**: 19.x
- **Node.js**: >=20.0 (указано в package.json)
- **Языки**: Markdown, MDX, JavaScript, TypeScript, BSL (язык 1С)
- **Инструменты качества**: Prettier, markdownlint, cspell

## Язык и локализация

- **Основной язык**: Русский
- Все комментарии, документация, сообщения коммитов должны быть на русском языке
- Используйте правильную русскую грамматику и орфографию
- Проверяйте орфографию через `npm run spellcheck` перед коммитом

## Форматирование кода

### JavaScript/TypeScript
- Используйте Prettier с настройками из `.prettierrc`:
  - `semi: true` - точка с запятой обязательна
  - `singleQuote: true` - одинарные кавычки
  - `tabWidth: 2` - отступ 2 пробела
  - `printWidth: 100` - максимальная длина строки 100 символов
  - `trailingComma: "es5"` - запятая в конце где возможно
  - `endOfLine: "lf"` - Unix-стиль окончаний строк

### Markdown
- Следуйте правилам markdownlint из `.markdownlint.json`
- Используйте правильную структуру заголовков (H1, H2, H3)
- Добавляйте frontmatter для страниц Docusaurus:
  ```markdown
  ---
  sidebar_position: 1
  slug: /path
  ---
  ```
- Используйте MDX синтаксис для интерактивных элементов
- Проверяйте форматирование через `npm run lint:md`

### BSL (язык 1С)
- Используйте синтаксис BSL для примеров кода в документации
- Подсветка синтаксиса настроена через `prism-bsl.js`
- Следуйте стандартам кодирования 1С, описанным в документации проекта

## Структура проекта

### Документация
- Основная документация находится в папке `docs/`
- Структура автоматически генерируется из файловой системы
- Используйте `_category_.json` для настройки категорий
- Изображения размещайте в соответствующих папках `img/` рядом с документами

### Конфигурация
- `docusaurus.config.js` - основная конфигурация Docusaurus
- `sidebars.js` - настройка боковой панели (автогенерация)
- `package.json` - зависимости и скрипты

### Статические файлы
- `static/` - статические файлы (изображения, манифесты, robots.txt)
- `src/` - исходный код компонентов и стилей

## Коммиты

### Формат коммитов
Используйте [Conventional Commits](https://www.conventionalcommits.org/ru/v1.0.0/) на русском языке:

```
<тип>(<область>): <описание>
```

**Типы коммитов:**
- `feat` - новая функциональность
- `fix` - исправление ошибки
- `docs` - изменения в документации
- `style` - форматирование кода (не влияет на функциональность)
- `refactor` - рефакторинг кода
- `perf` - улучшение производительности
- `test` - добавление или изменение тестов
- `chore` - обновление зависимостей, настройка и т.д.
- `ci` - изменения в CI/CD
- `build` - изменения в системе сборки
- `revert` - откат изменений

**Примеры:**
- `feat(docs): добавить документацию по API`
- `fix(core): исправить обработку ошибок`
- `docs: обновить README`
- `chore(ci): настроить pre-commit хуки`

## Процесс разработки

### Перед началом работы
1. Убедитесь, что используется правильная версия Node.js (`nvm use`)
2. Установите зависимости (`npm ci`)
3. Настройте Git хуки (`npm run prepare`)

### При работе с кодом
1. Запустите dev сервер для проверки изменений (`npm start`)
2. Проверяйте форматирование перед коммитом (`npm run format:check`)
3. Проверяйте Markdown (`npm run lint:md`)
4. Проверяйте орфографию (`npm run spellcheck`)

### Перед коммитом
Все проверки выполняются автоматически через pre-commit хуки:
- Форматирование (Prettier)
- Проверка Markdown (markdownlint)
- Проверка орфографии (cspell)

## Стиль документации

### Структура документа
- Используйте понятные и профессиональные заголовки
- Добавляйте примеры кода там, где это уместно
- Используйте блоки подсказок Docusaurus (:::tip, :::warning, :::danger)
- Добавляйте метаданные (keywords, description) в frontmatter

### Примеры кода
- Используйте правильные блоки кода с указанием языка
- Для BSL используйте ` ```bsl ` или ` ```1c `
- Для JavaScript/TypeScript используйте ` ```js ` или ` ```ts `
- Комментируйте сложные участки кода

### Изображения
- Размещайте изображения в папках `img/` рядом с документами
- Используйте относительные пути: `![Описание](./img/image.png)`
- Добавляйте альтернативный текст для доступности

## Проверка качества

### Автоматические проверки
- **Markdown Lint**: `npm run lint:md` или `npm run lint:md:fix`
- **Spellcheck**: `npm run spellcheck`
- **Format Check**: `npm run format:check` или `npm run format`
- **Link Checker**: `npm run check:links` (после сборки)
- **Lighthouse**: `npm run lighthouse:mobile` или `npm run lighthouse:desktop`

### Ручная проверка
- Запустите локальный сервер (`npm start`)
- Проверьте отображение на разных устройствах
- Убедитесь, что все ссылки работают
- Проверьте корректность примеров кода

## Особенности Docusaurus

### Frontmatter
Обязательные поля для страниц:
- `sidebar_position` - позиция в боковой панели
- `slug` - URL страницы
- `title` - заголовок (опционально, если не указан, берется из H1)
- `description` - описание для SEO
- `keywords` - ключевые слова для SEO

### Компоненты
- Используйте React компоненты из `src/components/` при необходимости
- Следуйте структуре существующих компонентов
- Добавляйте стили в `src/css/custom.css` или модульные CSS файлы

### Плагины
- SEO плагин: `src/plugins/seo-plugin.js`
- Локальный поиск: `@easyops-cn/docusaurus-search-local`
- Mermaid диаграммы: `@docusaurus/theme-mermaid`

## Работа с зависимостями

- Используйте `npm ci` для установки зависимостей (не `npm install`)
- Обновляйте зависимости через `npm update`
- Проверяйте уязвимости через `npm audit`
- Обновления зависимостей коммитьте как `chore(deps): обновить зависимости`

## Игнорируемые файлы

Не редактируйте и не коммитьте:
- `node_modules/`
- `build/`
- `.docusaurus/`
- `package-lock.json` (обновляется автоматически)
- `lighthouse-reports/`

## Дополнительные рекомендации

1. **Следуйте существующему стилю**: Изучите существующие документы перед созданием новых
2. **Используйте осмысленные имена**: Файлы, переменные, функции должны иметь понятные имена
3. **Документируйте изменения**: Описывайте изменения в PR и коммитах
4. **Тестируйте локально**: Всегда проверяйте изменения локально перед коммитом
5. **Следуйте принципам проекта**: KISS, DRY, YAGNI, SOLID (описаны в документации)

## Полезные команды

```bash
# Разработка
npm start              # Запуск dev сервера
npm run build          # Сборка проекта
npm run serve          # Запуск собранного проекта
npm run clear          # Очистка кэша

# Проверка качества
npm run lint:md        # Проверка Markdown
npm run lint:md:fix    # Исправление Markdown
npm run spellcheck     # Проверка орфографии
npm run format         # Форматирование кода
npm run format:check   # Проверка форматирования
npm run check:links    # Проверка ссылок
```

## Контакты и ресурсы

- **Репозиторий**: https://github.com/yellow-hammer/dev-rules
- **Документация**: https://yellow-hammer.github.io/dev-rules/
- **Telegram**: https://t.me/YellowHummer
- **Issues**: https://github.com/yellow-hammer/dev-rules/issues

---

**Важно**: Всегда проверяйте изменения локально перед коммитом и следуйте процессу разработки, описанному в `CONTRIBUTING.md`.

